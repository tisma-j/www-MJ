"use strict";var Card=function(e,i){var t={container:".card__container",content:".ajax-content",clip:".clip",letters:".titre-section span"},n="card__container--closed",o="body--hidden";function a(e,i){this.id=e,this._el=i,this._container=$(this._el).find(t.container)[0],this._clip=$(this._el).find(t.clip)[0],this._content=$("body").find(t.content)[0],this._letters=$(this._el).parent(".swiper-slide").find(t.letters),this.isOpen=!1,this._TL=null}return a.prototype.openCard=function(e){this._TL=new TimelineMax({id:"card"});var i=this._slideContentDown(),t=this._floatContainer(e),n=(this._clipImageOut(),this._fallingLetters());return this._TL.add(i),this._TL.add(t,0),this._TL.add(n,0),this.isOpen=!0,this._TL},a.prototype._slideContentDown=function(){return TweenLite.to(this._content,.8,{y:e.innerHeight,ease:Expo.easeInOut})},a.prototype._clipImageIn=function(){return TweenLite.to(this._clip,.8,{scaleX:.4,scaleY:.3,transformOrigin:"50% 50%",ease:Power3.easeOut})},a.prototype._floatContainer=function(i){$(document.body).addClass(o);let t=new TimelineLite,a=this._container.getBoundingClientRect(),s=e.innerWidth,r=e.innerHeight;var l={width:0,x:a.left+a.width/2,y:a.top+a.height/2};return t.set(this._container,{width:a.width,height:a.height,x:a.left,y:a.top,position:"fixed",overflow:"hidden"}),t.to([this._container,l],.8,{x:s/2,y:0,xPercent:-50,height:.9*r*.3,ease:Power2.easeOut,className:"-="+n}).to([this._container,l],.3,{width:.9*s,className:"-="+n,ease:Expo.easeIn}),t},a.prototype._clipImageOut=function(){e.innerWidth;return TweenLite.to(this._clip,.8,{scaleX:1,scaleY:1,autoRound:!1,transformOrigin:"50% 50%",smoothOrigin:!0,ease:Expo.easeInOut})},a.prototype._fallingLetters=function(){return TweenMax.set(".swiper-slide",{css:{transformStyle:"preserve-3d",perspective:500,z:0}}),TweenMax.set(this._letters,{css:{backfaceVisibility:"hidden"}}),TweenMax.staggerTo(this._letters,.4,{autoAlpha:0,y:"+=20",ease:Power2.easeInOut},.1)},a.prototype._slideContentUp=function(){return TweenLite.to(this._content,1,{y:0,clearProps:"all",ease:Expo.easeInOut})},a.prototype.closeCard=function(){return TweenLite.to(this._container,.4,{y:0,onComplete:function(){$(this._container).css("overflow","hidden")}.bind(this),ease:Power2.easeOut}),this._TL.eventCallback("onReverseComplete",function(){TweenLite.set([this._container,this._content],{clearProps:"all"}),$(document.body).removeClass(o),this.isOpen=!1}.bind(this)),this._TL.reverse()},a.prototype.hideCard=function(){return TweenLite.to(this._el,.4,{scale:.8,autoAlpha:0,transformOrigin:"center bottom",ease:Expo.easeInOut})},a.prototype.showCard=function(){return TweenLite.to(this._el,.5,{scale:1,autoAlpha:1,clearProps:"all",ease:Expo.easeInOut})},a}(window),transitionPages=function(e,i){var t={pattern:".pattern",card:".card",cardImage:".card__image",cardClose:".div-closecross",ajaxContent:"#page"},n={};function o(i){let o=i.data.isOpenClick,r=i.data.cardId,l=$("body").find(t.cardClose);console.log("_playSequence, id avant :"+r),r<0&&(r=l.data("card")),console.log("_playSequence, id apres :"+r);var c=n[r].card;if(!c.isOpen||!o){var d=new TimelineMax({paused:!0,id:"Main"}),p=function(e){var i=new TimelineLite,t=n[e].card;for(var o in n){var a=n[o].card;a.id===e||t.isOpen||i.add(a.hideCard(),0),a.id!==e&&t.isOpen&&i.add(a.showCard(),0)}return i}(r);if(c.isOpen){var h=c.closeCard(),f=.8*h.duration(),g=new TimelineLite;onfire.fire("switch_swiper","enable"),g.to("#page>*",.4,{y:"+=20",alpha:0,ease:Power3.esaeOut,onComplete:function(){e.location="index.html"}}),d.add(g),d.add(h),d.add(p,f)}else l.data("card",r),d.add(p),d.add(c.openCard(s),0),d.call(a,0);d.play()}}function a(){onfire.fire("switch_swiper","disable")}function s(e){console.log("update track");e.width,e.x,e.y}return{init:function(){var e,i;e=$(t.card),i=$("body").find(t.cardClose),e.each(function(e){var i=new Card(e,this);n[e]={card:i};var a=$(this).find(t.cardImage);$(a).on("click",{isOpenClick:!0,cardId:e},o)}),$(i).on("click",{isOpenClick:!1,cardId:-1},o)}}}(window);window.onload=transitionPages.init;var appCDL=null;!function(e){e.exists=function(i){return e(i).length>0},(appCDL={init:function(){this.config(),this.bindEvents()},config:function(){this.config={$window:e(window),$document:e(document),$windowWidth:e(window).width(),$windowHeight:e(window).height(),$windowTop:e(window).scrollTop(),$body:e("body"),$viewportWidth:"",$is_rtl:!1,$wpAdminBar:null,$eltDom:null,$isMobile:!1,$mobileMenuStyle:null,$mobileMenuToggleStyle:null,$mobileMenuBreakpoint:992,$siteHeader:e("header"),$siteHeaderStyle:null,$siteHeaderHeight:0,$siteHeaderTop:0,$siteHeaderBottom:0,$verticalHeaderActive:!1,$hasHeaderOverlay:!1,$hasStickyHeader:!1,$hasStickyMobileHeader:!1,$hasStickyNavbar:!1,$swiperHome:null,$siteLogo:null,$siteLogoHeight:0,$siteLogoSrc:null,$siteNavWrap:null,$siteNavDropdowns:null,$localScrollTargets:"li.local-scroll a, a.local-scroll, .local-scroll-link",$localScrollOffset:0,$localScrollSpeed:600,$localScrollSections:[],$hasTopBar:!1,$hasStickyTopBar:!1,$stickyTopBar:null,$hasStickyTopBarMobile:!1,$hasFixedFooter:!1}},bindEvents:function(){var i=this;document.addEventListener("swup:contentReplaced",e=>{swup.options.elements.forEach(e=>{console.log(e)})}),i.config.$document.ready(function(){i.initUpdateConfig(),i.initPageTransitions(),i.initBurger(),i.initDelighters(),i.swiperSlider(),i.magnificPopup()}),i.config.$window.on("load",function(){i.config.$siteHeaderStyle;i.windowLoadUpdateConfig(),e.exists("body.home")&&i.initHome(),window.setTimeout(function(){i.scrollMonitor(),i.scrollToHash(i),i.config.$body.addClass("is-loaded"),i.config.$body.find(".site-loader").removeClass("is-visible")},500)}),i.config.$window.resize(function(){i.config.$window.width()!=i.config.$windowWidth&&i.resizeUpdateConfig(),i.config.$window.height(),i.config.$windowHeight}),i.config.$window.on("orientationchange",function(){i.resizeUpdateConfig()})},initUpdateConfig:function(){this.config.$viewportWidth=this.viewportWidth(),this.mobileCheck()&&(this.config.$isMobile=!0,this.config.$body.addClass("wpsp-is-mobile-device"));var i=e("#eltDom");i.length&&(this.config.$eltDom=i)},windowLoadUpdateConfig:function(){if(this.config.$siteHeader){var e=this.config.$siteHeader.offset().top;this.config.$windowHeight=this.config.$window.height(),this.config.$siteHeaderHeight=this.config.$siteHeader.outerHeight(),this.config.$siteHeaderBottom=e+this.config.$siteHeaderHeight,this.config.$siteHeaderTop=e,this.config.$siteLogo&&(this.config.$siteLogoHeight=this.config.$siteLogo.height())}},resizeUpdateConfig:function(){this.config.$windowHeight=this.config.$window.height(),this.config.$windowWidth=this.config.$window.width(),this.config.$windowTop=this.config.$window.scrollTop(),this.config.$viewportWidth=this.viewportWidth(),this.config.$siteHeader&&(this.config.$siteHeaderHeight=this.config.$siteHeader.outerHeight()),this.config.$siteLogo&&(this.config.$siteLogoHeight=this.config.$siteLogo.height()),this.config.$windowWidth<960?this.config.$verticalHeaderActive=!1:this.config.$body.hasClass("wpsp-has-vertical-header")&&(this.config.$verticalHeaderActive=!0)},mobileCheck:function(){if(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent))return!0},initObserver:function(){},initBurger:function(){var i=document.querySelectorAll(".Navbar__Link"),t=i.length;console.log("count:"+t);var n=function(e){return{left:Math.random()*window.innerWidth,top:Math.random()*window.innerHeight}};function o(e,t){var n=!1,o=i[e].getBoundingClientRect();console.log("rectBase",i[e]);for(var a=e-1;a>=0;a--){var s=i[a].getBoundingClientRect();if(console.log("loopRect",i[a]),window.console&&console.log(o,s),n=!(o.right<s.left+20||o.left>s.right+20||o.bottom<s.top+20||o.top>s.bottom+20),console.log("overlap",n),n)return n}return n}e(".Navbar__Link-toggle").on("click",function(t){t.preventDefault(),e(".Navbar__Items").toggleClass("Navbar__ToggleShow"),e("header").toggleClass("nav-open"),e("header").hasClass("nav-open")&&i.forEach(function(e,i){var t=n(i);e.style.left=t.left.toFixed(2)+"px",e.style.top=t.top.toFixed(2)+"px",console.log("index",i);for(var a=e.getBoundingClientRect();a.width+t.left>window.innerWidth||a.height+t.top>window.innerHeight||o(i,t);)t=n(),e.style.left=t.left.toFixed(2)+"px",e.style.top=t.top.toFixed(2)+"px"})})},initPageTransitions:function(){var i=this;new Swupjs({debugMode:!0,elements:["#page"],pageClassPrefix:"loadpage",animationSelector:".site-loader",LINK_SELECTOR:'.swiper-container a:not([data-no-swup]):not([href$="jpg"]):not([href$="png"]), .navbar a',animations:{"*":{out:function(i){e(".site-loader").addClass("is-visible"),e("#page").addClass("is-invisible"),setTimeout(i,2e3)},in:function(t){e(".site-loader").removeClass("is-visible"),e("#page").removeClass("is-invisible"),TweenMax.to([".swiper-container",".swiper-pagination-bullets"],.4,{autoAlpha:0}),Delighters.init(),e("html").hasClass("to-workhtml")&&i.initProjets()}}}})},initProjets:function(){var e=document.querySelector(".current"),i=document.querySelectorAll(".nbr-work");i.forEach(function(t){t.addEventListener("click",function(n){i.forEach(function(e){e.classList.remove("active")}),n.target.classList.add("active"),e.classList.remove("current");var o=document.querySelector(t.dataset.target);o.classList.add("current"),e=o})})},scrollMonitor:function(){e(".scrollMonitorItem").each(function(e,i){})},viewportWidth:function(){var e=window,i="inner";return"innerWidth"in window||(i="client",e=document.documentElement||document.body),e[i+"Width"]},scrollToHash:function(i){var t=i,n=location.hash;n&&(-1==n.indexOf("localscroll-")?e('[data-ls_id="'+n+'"]').length&&t.scrollTo(n):t.scrollTo(n.replace("localscroll-","")))},initHome:function(){let i=document.querySelectorAll(".video-home");if("IntersectionObserver"in window){let t=new IntersectionObserver(function(i,t){for(var n of i){let i=e(n.target).find("video").get(0);n.isIntersecting?(n.target.className="video-home inViewport",i.loop=!0,i.controls=!1,i.play()):(n.target.className="video-home outViewport",i.pause())}});i.forEach(e=>t.observe(e))}},owlCarouselThumb:function(){e(".owl-carousel").owlCarousel({loop:!1,items:1,thumbs:!0,thumbsPrerendered:!0,responsiveClass:!0,responsive:{0:{dots:!0},768:{dots:!1}}})},initDelighters:function(){console.log("initDelighters")},swiperSlider:function(){let i;console.log("swiperSlider");var t=this;e("body.home").each(function(){i=new Swiper(".swiper-container",{slidesPerView:1,spaceBetween:0,mousewheel:!0,pagination:{el:".dots",clickable:!0,renderBullet:function(e,i){return'<div class="dot '+i+'"></div>'}}}),t.config.$swiperHome=i;onfire.on("switch_swiper",t.switchSwiper)})},switchSwiper:function(i){switch(i){case"disable":console.log("appel de l evenement swiper en disable : "+i),e(".swiper-container").css("max-height","500px"),e(".swiper-pagination").css("display","none");break;case"enable":default:e(".swiper-container").css("max-height","auto"),e(".swiper-pagination").css("display","block")}},magnificPopup:function(){console.log("magnificPopup"),e.fn.magnificPopup&&(console.log("magnificPopup 2"),e('a[href*=".jpg"], a[href*=".jpeg"], a[href*=".png"], a[href*=".gif"]').each(function(){0==e(this).parents(".gallery").length&&0==e(this).parents(".single-portfolio_page").length&&e(this).magnificPopup({type:"image",mainClass:"mfp-no-margins mfp-with-zoom",closeBtnInside:!0,closeOnContentClick:!0,image:{verticalFit:!1},zoom:{enabled:!0,duration:300}})}),e(".lightbox-images").magnificPopup({type:"image",closeOnContentClick:!1,closeBtnInside:!1,removalDelay:300,mainClass:"mfp-fade",gallery:{enabled:!0}}),e(".single-portfolio_page .entry-content").each(function(){e(this).magnificPopup({delegate:'a[href*=".jpg"], a[href*=".jpeg"], a[href*=".png"], a[href*=".gif"]',type:"image",removalDelay:300,mainClass:"mfp-fade",gallery:{enabled:!0,navigateByImgClick:!0,arrowMarkupX:'<span title="%title%" class="mfp-arrow mfp-arrow-%dir%"><i class="fa fa-angle-%dir% mfp-prevent-close"></i></span>'},callbacks:{open:function(){e.magnificPopup.instance.next=function(){var i=this;i.wrap.removeClass("mfp-image-loaded"),setTimeout(function(){e.magnificPopup.proto.next.call(i)},120)},e.magnificPopup.instance.prev=function(){var i=this;i.wrap.removeClass("mfp-image-loaded"),setTimeout(function(){e.magnificPopup.proto.prev.call(i)},120)}},imageLoadComplete:function(){var e=this;setTimeout(function(){e.wrap.addClass("mfp-image-loaded")},16)}}})}),e(".gallery").each(function(){e(this).magnificPopup({delegate:"a",type:"image",removalDelay:300,mainClass:"mfp-fade",gallery:{enabled:!0,navigateByImgClick:!0}})}),e(".popup-youtube, .popup-vimeo, .popup-gmaps").magnificPopup({disableOn:700,type:"iframe",mainClass:"mfp-fade",removalDelay:160,preloader:!1,fixedContentPos:!1}))},parseData:function(e,i){return void 0!==e?e:i},getUrlExtension:function(e){var i=e.split(".").pop().toLowerCase(),t=-1!==i.indexOf("?")?i.split("?").pop():"";return i.replace(t,"")}}).init()}(jQuery);