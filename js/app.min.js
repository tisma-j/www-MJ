"use strict";var Card=function(i,e){var t={container:".card__container",content:".card__content",clip:".clip"},o="card__container--closed",n="body--hidden";function a(i,e){this.id=i,this._el=e,this._container=$(this._el).find(t.container)[0],this._clip=$(this._el).find(t.clip)[0],this._content=$(this._el).find(t.content)[0],this.isOpen=!1,this._TL=null}return a.prototype.openCard=function(i){this._TL=new TimelineLite;var e=this._slideContentDown(),t=this._clipImageIn(),o=this._floatContainer(i),n=this._clipImageOut(),a=this._slideContentUp();return this._TL.add(e),this._TL.add(t,0),this._TL.add(o,"-="+.6*t.duration()),this._TL.add(n,"-="+.3*o.duration()),this._TL.add(a,"-="+.6*n.duration()),this.isOpen=!0,this._TL},a.prototype._slideContentDown=function(){return TweenLite.to(this._content,.8,{y:i.innerHeight,ease:Expo.easeInOut})},a.prototype._clipImageIn=function(){return TweenLite.to(this._clip,.8,{width:"+=",yPercent:-10,ease:Expo.easeInOut})},a.prototype._floatContainer=function(e){$(document.body).addClass(n);var t=new TimelineLite,a=this._container.getBoundingClientRect(),s=i.innerWidth,r={width:0,x:a.left+a.width/2,y:a.top+a.height/2};return t.set(this._container,{width:a.width,height:a.height,x:a.left,y:a.top,position:"fixed",overflow:"hidden"}),t.to([this._container,r],2,{width:s,height:"100%",x:s/2,y:0,xPercent:-50,ease:Expo.easeInOut,clearProps:"all",className:"-="+o,onUpdate:e.bind(this,r)}),t},a.prototype._clipImageOut=function(){i.innerWidth;return TweenLite.to(this._clip,.8,{width:"100vw",height:"100vh",autoRound:!1,transformOrigin:"50% 50%",ease:Expo.easeInOut})},a.prototype._slideContentUp=function(){return TweenLite.to(this._content,1,{y:0,clearProps:"all",ease:Expo.easeInOut})},a.prototype.closeCard=function(){return TweenLite.to(this._container,.4,{scrollTo:{y:0},onComplete:function(){$(this._container).css("overflow","hidden")}.bind(this),ease:Power2.easeOut}),this._TL.eventCallback("onReverseComplete",function(){TweenLite.set([this._container,this._content],{clearProps:"all"}),$(document.body).removeClass(n),this.isOpen=!1}.bind(this)),this._TL.reverse()},a.prototype.hideCard=function(){return TweenLite.to(this._el,.4,{scale:.8,autoAlpha:0,transformOrigin:"center bottom",ease:Expo.easeInOut})},a.prototype.showCard=function(){return TweenLite.to(this._el,.5,{scale:1,autoAlpha:1,clearProps:"all",ease:Expo.easeInOut})},a}(window),demo=function(i,e){var t={pattern:".pattern",card:".card",cardImage:".card__image",cardClose:".card__btn-close"},o={};function n(i){let e=i.data.isOpenClick,t=i.data.cardId;var n=o[t].card;if(!n.isOpen||!e){var s=new TimelineLite({paused:!0}),r=function(i){var e=new TimelineLite,t=o[i].card;for(var n in o){var a=o[n].card;a.id===i||t.isOpen||e.add(a.hideCard(),0),a.id!==i&&t.isOpen&&e.add(a.showCard(),0)}return e}(t);if(n.isOpen){var l=n.closeCard(),c=.8*l.duration();s.add(l),s.add(r,c)}else s.add(r),s.add(n.openCard(a),0);s.play()}}function a(i){console.log("update track");i.width,i.x,i.y}return{init:function(){$(t.card).each(function(i){var e=new Card(i,this);o[i]={card:e};var a=$(this).find(t.cardImage),s=$(this).find(t.cardClose);$(a).on("click",{isOpenClick:!0,cardId:i},n),$(s).on("click",{isOpenClick:!1,cardId:i},n)})}}}(window);window.onload=demo.init,function(i){i.exists=function(e){return i(e).length>0},{init:function(){this.config(),this.bindEvents()},config:function(){this.config={$window:i(window),$document:i(document),$windowWidth:i(window).width(),$windowHeight:i(window).height(),$windowTop:i(window).scrollTop(),$body:i("body"),$viewportWidth:"",$is_rtl:!1,$wpAdminBar:null,$eltDom:null,$isMobile:!1,$mobileMenuStyle:null,$mobileMenuToggleStyle:null,$mobileMenuBreakpoint:992,$siteHeader:null,$siteHeaderStyle:null,$siteHeaderHeight:0,$siteHeaderTop:0,$siteHeaderBottom:0,$verticalHeaderActive:!1,$hasHeaderOverlay:!1,$hasStickyHeader:!1,$hasStickyMobileHeader:!1,$hasStickyNavbar:!1,$siteLogo:null,$siteLogoHeight:0,$siteLogoSrc:null,$siteNavWrap:null,$siteNavDropdowns:null,$localScrollTargets:"li.local-scroll a, a.local-scroll, .local-scroll-link",$localScrollOffset:0,$localScrollSpeed:600,$localScrollSections:[],$hasTopBar:!1,$hasStickyTopBar:!1,$stickyTopBar:null,$hasStickyTopBarMobile:!1,$hasFixedFooter:!1}},bindEvents:function(){var e=this;e.config.$document.ready(function(){e.initUpdateConfig(),e.initPageTransitions(),e.initDelighters(),e.swiperSlider(),e.magnificPopup()}),e.config.$window.on("load",function(){e.config.$siteHeaderStyle;e.windowLoadUpdateConfig(),i.exists("body.home")&&e.initHome(),window.setTimeout(function(){e.scrollMonitor(),e.scrollToHash(e),e.config.$body.addClass("is-loaded"),e.config.$body.find(".site-loader").removeClass("is-visible")},500)}),e.config.$window.resize(function(){e.config.$window.width()!=e.config.$windowWidth&&e.resizeUpdateConfig(),e.config.$window.height(),e.config.$windowHeight}),e.config.$window.on("orientationchange",function(){e.resizeUpdateConfig()})},initUpdateConfig:function(){this.config.$viewportWidth=this.viewportWidth(),this.mobileCheck()&&(this.config.$isMobile=!0,this.config.$body.addClass("wpsp-is-mobile-device"));var e=i("#eltDom");e.length&&(this.config.$eltDom=e)},windowLoadUpdateConfig:function(){if(this.config.$siteHeader){var i=this.config.$siteHeader.offset().top;this.config.$windowHeight=this.config.$window.height(),this.config.$siteHeaderHeight=this.config.$siteHeader.outerHeight(),this.config.$siteHeaderBottom=i+this.config.$siteHeaderHeight,this.config.$siteHeaderTop=i,this.config.$siteLogo&&(this.config.$siteLogoHeight=this.config.$siteLogo.height())}},resizeUpdateConfig:function(){this.config.$windowHeight=this.config.$window.height(),this.config.$windowWidth=this.config.$window.width(),this.config.$windowTop=this.config.$window.scrollTop(),this.config.$viewportWidth=this.viewportWidth(),this.config.$siteHeader&&(this.config.$siteHeaderHeight=this.config.$siteHeader.outerHeight()),this.config.$siteLogo&&(this.config.$siteLogoHeight=this.config.$siteLogo.height()),this.config.$windowWidth<960?this.config.$verticalHeaderActive=!1:this.config.$body.hasClass("wpsp-has-vertical-header")&&(this.config.$verticalHeaderActive=!0)},mobileCheck:function(){if(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent))return!0},initObserver:function(){},initPageTransitions:function(){},scrollMonitor:function(){i(".scrollMonitorItem").each(function(i,e){})},viewportWidth:function(){var i=window,e="inner";return"innerWidth"in window||(e="client",i=document.documentElement||document.body),i[e+"Width"]},scrollToHash:function(e){var t=e,o=location.hash;o&&(-1==o.indexOf("localscroll-")?i('[data-ls_id="'+o+'"]').length&&t.scrollTo(o):t.scrollTo(o.replace("localscroll-","")))},initHome:function(){let e=document.querySelectorAll(".video-home");if("IntersectionObserver"in window){let t=new IntersectionObserver(function(e,t){for(var o of e){let e=i(o.target).find("video").get(0);o.isIntersecting?(o.target.className="video-home inViewport",e.loop=!0,e.controls=!1,e.play()):(o.target.className="video-home outViewport",e.pause())}});e.forEach(i=>t.observe(i))}},owlCarouselThumb:function(){i(".owl-carousel").owlCarousel({loop:!1,items:1,thumbs:!0,thumbsPrerendered:!0,responsiveClass:!0,responsive:{0:{dots:!0},768:{dots:!1}}})},initDelighters:function(){console.log("initDelighters")},swiperSlider:function(){let e;console.log("swiperSlider"),i("body.home").each(function(){e=new Swiper(".swiper-container",{slidesPerView:1,spaceBetween:0,mousewheel:!0,pagination:{el:".swiper-pagination",clickable:!0}})})},magnificPopup:function(){console.log("magnificPopup"),i.fn.magnificPopup&&(console.log("magnificPopup 2"),i('a[href*=".jpg"], a[href*=".jpeg"], a[href*=".png"], a[href*=".gif"]').each(function(){0==i(this).parents(".gallery").length&&0==i(this).parents(".single-portfolio_page").length&&i(this).magnificPopup({type:"image",mainClass:"mfp-no-margins mfp-with-zoom",closeBtnInside:!0,closeOnContentClick:!0,image:{verticalFit:!1},zoom:{enabled:!0,duration:300}})}),i(".lightbox-images").magnificPopup({type:"image",closeOnContentClick:!1,closeBtnInside:!1,removalDelay:300,mainClass:"mfp-fade",gallery:{enabled:!0}}),i(".single-portfolio_page .entry-content").each(function(){i(this).magnificPopup({delegate:'a[href*=".jpg"], a[href*=".jpeg"], a[href*=".png"], a[href*=".gif"]',type:"image",removalDelay:300,mainClass:"mfp-fade",gallery:{enabled:!0,navigateByImgClick:!0,arrowMarkupX:'<span title="%title%" class="mfp-arrow mfp-arrow-%dir%"><i class="fa fa-angle-%dir% mfp-prevent-close"></i></span>'},callbacks:{open:function(){i.magnificPopup.instance.next=function(){var e=this;e.wrap.removeClass("mfp-image-loaded"),setTimeout(function(){i.magnificPopup.proto.next.call(e)},120)},i.magnificPopup.instance.prev=function(){var e=this;e.wrap.removeClass("mfp-image-loaded"),setTimeout(function(){i.magnificPopup.proto.prev.call(e)},120)}},imageLoadComplete:function(){var i=this;setTimeout(function(){i.wrap.addClass("mfp-image-loaded")},16)}}})}),i(".gallery").each(function(){i(this).magnificPopup({delegate:"a",type:"image",removalDelay:300,mainClass:"mfp-fade",gallery:{enabled:!0,navigateByImgClick:!0}})}),i(".popup-youtube, .popup-vimeo, .popup-gmaps").magnificPopup({disableOn:700,type:"iframe",mainClass:"mfp-fade",removalDelay:160,preloader:!1,fixedContentPos:!1}))},parseData:function(i,e){return void 0!==i?i:e},getUrlExtension:function(i){var e=i.split(".").pop().toLowerCase(),t=-1!==e.indexOf("?")?e.split("?").pop():"";return e.replace(t,"")}}.init()}(jQuery);